# Introducción
La capa de aplicación se ocupa de la **comunicación entre procesos.** El esquema típico se muestra en la siguiente figura:
![[archivos/Pasted image 20240929172714.png]]

## Protocolo de comunicación
La comunicación de dos procesos, tanto en el **mismo host** como en hosts diferentes, se hace **enviando mensajes**. Para que los mensajes sean comprendidos hay que establecer un **protocolo**.

El **protocolo** facilita la programación. Hay que programar tanto las funciones de envío como las de recepción y si tenemos un protocolo claro de programación será más fácil.

**Especificaciones del protocolo:**
- **Qué mensajes hay**, típicamente qué repeticiones e pueden hacer y qué respuestas les corresponden
- **Las reglas** que especifican cuando se **envían o responden** mensajes.
- La **sintaxis del mensaje**, es decir, los campos de que consta
- La **semática de cada campo**, su significado.

## Servicios que necesita la aplicación de red
Los porotocolos de la capa de aplicación utilizan por debajo los portocolos básicos proporcionados por la capa de transporte. COmo vimos en el tema anterior, estos son: **TCP y UDP**, TCP proporciona un servicio **fiable** y UDP un servicio **sencillo y rapido, pero no garantiza la recepción**.
En este tema veremos los siguientes **protocolos de aplicación:**
![[archivos/Pasted image 20240929173650.png]]
Los TCP necesitamos tener la seguridad de que **no se producen errores**. El **DNS** (*servicio de nombres de dominio*), utilizado para realizar traducciones de nombres de **hosts/ direcciones IP**, se usa **UDP** porque se prefiere cambiar de servidos en caso de no obtener respuesta.
Cada **host** suele tener una **lista de servidores de nombres** y cuando se precisa una traducción se va probando sucesivamente con los servidores de la lista. Si el primero no responde porque el mensaje se pierde, se pasa el siguiente y así sucesivamente. SI hay problemas mejor **cambiar de servidor** antes que intentarlo siempre con el mismo, por eso va bien **UDP**
Además de los **protocolos** y la **transferencia fiable/no fiable de datos**, se necesita **ancho de banda** y **temporarización**.

Denominamos **agente de usuario**, a la interfaz entre el usuario y la aplicación. O sea el programa gráfico que permite al usuario trabajar cómodamente con la aplicación, por ejemplo **firefox**.

# Protocolo de Transferencia de Hipertexto HTTP
Este protocolo define la comunicación entre un servidor y un cliente web.

## Tipos de conexiones HTTP
Una **página web** usualmente consta de varios objetos, es decir, de varios **ficheros**:
![[archivos/Pasted image 20240929183958.png]]
Cuando un **navegador** solicita una **página web**, el primer objeto que se devuelve es el **documento base**, que contiene el layout de la página usualmente también el texto. El **layout** indica cómo conseguir lo restantes objetos y dónde han de colocarse.
Dependiendo de como se realicen las conexiones para conseguir los distintos objetos, se distinguen las siguientes conexiones **HTTP**:
![[archivos/Pasted image 20240929184228.png]]

Con **conexiones no persistentes** se utiliza una conexión **TCP** distinta para transferir cada uno de los objetos. Con **conexiones persistentes** se pueden transferir varios objetos e incluso varias páginas con la misma conexión **TCP**.
![[archivos/Pasted image 20240929184416.png]]
Las **conexiones no persistentes** pueden ser **serie** si se espera a que acabe la **conexión TCP** previa antes de que comience la siguiente o bien **paralelas** si se inician varias **conexiones TCP** a la vez.
![[archivos/Pasted image 20240929184609.png]]

Con **conexiones persistentes** se utiliza la misma **conexión TCP** para conseguir **varios objetos** o incluso varias **páginas web** diferentes. Típicamente el **servidor** cierra la **conexión TCP** cuando no ha sido utilizada durante cierto tiempo.

Existen dos versiones de **conexiones persistentes**. En la versión **sin entubamiento**, el cliente sólo pide un nuevo objeto cuando el previo ha sido recibido. En la versión **con entubamiento** el cliente puede hacer peticiones de varios objetos antes de recibir los anteriores. El modo por defecto de **HTTP/1.1**  es **persistente con entubamiento**.

![[archivos/Pasted image 20240929184949.png]]



