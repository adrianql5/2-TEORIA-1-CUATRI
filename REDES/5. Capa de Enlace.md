 [[archivos/bibliografia/[1] Redes de Computadores.pdf|[1] Redes de Computadores]]
 [[archivos/bibliografia/tcpip-nico.pdf|tcpip-nico]]

# Introducción 
La **capa de enlace** es la segunda capa del modelo OSI y se encarga de gestionar la transmisión de datos entre nodos directamente conectados en una red. Su propósito principal es asegurar que los datos se transfieran de forma confiable a través de un enlace físico entre los extremos de una conexión.

- **Nodos**: hosts origen y destino y los routers
- **Enlaces**: LANs o redes punto a punto

![[archivos/imagenes/Pasted image 20241125103956.png]]

#### **Funcionalidad General**
- **Transmisión de Bloques de Bits:** La capa de enlace organiza los datos en unidades manejables llamadas _tramas_ (_frames_ o _marcos_), las cuales encapsulan información del nivel superior junto con metadatos para su correcta transmisión y recepción.
- **Protocolos Dependientes de la Tecnología de Red:** Los protocolos que operan en esta capa están ajustados al tipo de red subyacente, como:
    - Difusión.
    - Circuitos virtuales.
    - Conmutación de circuitos.
    - Conmutación de paquetes.

#### **Unidades de Datos**
- La unidad de medida o _PDU (Protocol Data Unit)_ de la capa de enlace es la **trama**. Esta incluye:
    - Cabecera (_header_): contiene información de control, como direcciones físicas y mecanismos de detección de errores.
    - Datos (_payload_): la información útil.
    - Cola (_trailer_): bits adicionales usados para la detección y corrección de errores.

![[archivos/imagenes/Pasted image 20241125103825.png]]

#### **Tipos de Enlace**
1. **Punto a Punto:** Enlace directo entre un emisor y un receptor (un único par de dispositivos).
2. **Difusión:** Un medio compartido donde múltiples emisores y receptores pueden comunicarse (ejemplo: redes Ethernet).

![[archivos/imagenes/Pasted image 20241125103656.png]]

#### **Implementación en un Host**
- La capa de enlace se implementa generalmente en la **tarjeta de red** del dispositivo.
    - El sistema operativo transfiere los datos al adaptador de red.
    - Este adaptador añade la cabecera y envía las tramas al medio físico.

#### **Protocolos de la Capa de Enlace**
Los protocolos en esta capa definen:
1. El **formato de las tramas**.
2. Las acciones a realizar cuando un nodo envía o recibe tramas.

#### **Servicios Proporcionados por la Capa de Enlace**
1. **Entramado:**
    - Encapsula los datos de las capas superiores en tramas, delimitando dónde empieza y termina cada trama.
2. **Acceso al Enlace:**
    - Controla el acceso al medio físico mediante protocolos de acceso múltiple (_MAC_), esenciales en medios compartidos.
3. **Entrega Fiable:**
    - Asegura que las tramas lleguen al receptor mediante confirmaciones y retransmisiones si es necesario.
4. **Control de Flujo:**
    - Regula la velocidad de envío para evitar saturar al receptor.
5. **Detección de Errores:**
    - Utiliza técnicas para identificar errores en los datos causados por interferencias electromagnéticas o ruido en la señal. Ejemplos:
        - Bits de paridad.
        - CRC (Comprobación de Redundancia Cíclica).
        - Checksums.
6. **Corrección de Errores:**
    - Repara errores detectados mediante mecanismos integrados en hardware o software.
7. **Modo de Transmisión:**
    - **Half-Duplex:** Transmisión en un solo sentido a la vez.
    - **Full-Duplex:** Transmisión simultánea en ambos sentidos.

![[archivos/imagenes/Pasted image 20241125104106.png]]

#### **Características Destacadas**
- **Detección de Errores Mejorada:** En comparación con las capas superiores, la detección en la capa de enlace es más robusta, ya que incluye mecanismos adicionales debido a la proximidad al medio físico.
- **Control de Acceso al Medio:** Especialmente relevante en redes compartidas como Ethernet o Wi-Fi, donde múltiples dispositivos compiten por el acceso.

Esta estructura permite a la capa de enlace ofrecer un puente confiable entre las capas superiores y el medio físico.


> [!Recordatorio]
> ![[archivos/imagenes/Pasted image 20241108205726.png]]

# Modelo IEEE 802
El **modelo IEEE 802** define estándares para redes de área local (LANs) y redes de área metropolitana (MANs). Este modelo organiza la **capa de enlace** en dos subcapas principales para manejar la comunicación y garantizar la interoperabilidad entre dispositivos de diferentes fabricantes.

### **Subcapas de la Capa de Enlace**
#### 1. **LLC (Logical Link Control, Control de Enlace Lógico)**
La **capa LLC** actúa como una interfaz entre las capas superiores (como la capa de red) y la subcapa MAC. Se encarga de añadir información de control a los datos y gestionar aspectos generales de la transmisión.
- **Definida por IEEE 802.2.**
    
- **Funciones principales:**
    
    - Añade una cabecera adicional para controlar los datos transmitidos.
    - Proporciona servicios de control de flujo y control de errores.
    - Gestiona la comunicación con las capas superiores.
- **Modos de funcionamiento de la capa LLC:**
    
    1. **Sin conexión ni confirmaciones:**
        - No verifica que los datos lleguen correctamente.
        - No hay control de flujo ni control de errores.
        - Las capas superiores son responsables de gestionar problemas como retransmisiones.
    2. **Sin conexión con confirmaciones:**
        - Confirma la recepción de las tramas individuales.
        - No establece una conexión previa (es decir, no asegura que haya una sesión de comunicación predefinida).
    3. **Con conexión y confirmaciones:**
        - Establece una conexión lógica antes de la transmisión.
        - Asegura el control de flujo y la detección/corrección de errores.

---

#### 2. **MAC (Media Access Control, Control de Acceso al Medio)**
La **capa MAC** es responsable de ensamblar los datos en _tramas_ (frames) y gestionar el acceso al medio físico compartido. Especifica cómo los dispositivos en una red comparten el medio de transmisión y garantiza que las tramas lleguen al destino correcto.

- **Definida por distintos estándares IEEE:**
    
    - **IEEE 802.3 (Ethernet):** Tecnología más usada en redes cableadas.
    - **IEEE 802.4 (Token Bus):** Usa un token (testigo) para controlar el acceso al medio.
    - **IEEE 802.5 (Token Ring):** Los dispositivos forman un anillo lógico y pasan un token para regular el acceso.
    - **IEEE 802.6 (MAN):** Define redes metropolitanas de alta velocidad.
    - **IEEE 802.11 (Wireless):** Tecnología inalámbrica común (Wi-Fi).

![[archivos/imagenes/Pasted image 20241125104820.png]]

- **Funciones principales:**
    - Ensambla las tramas incluyendo:
        - Direcciones de origen y destino.
        - Bits de control para la detección de errores.
    - Maneja la transmisión en medios compartidos, controlando quién puede enviar en cada momento (evita colisiones).
    - Detecta y corrige errores en las tramas cuando sea posible.
    - Desensambla las tramas en el receptor, verificando las direcciones y detectando errores.

### **Formato de las Tramas en IEEE 802**
Las tramas creadas en el modelo IEEE 802 incluyen varios campos clave:

1. **DSAP (Destination Service Access Point):**
    - Indica el punto de acceso al servicio del destino, es decir, la capa superior en el dispositivo receptor que debe procesar los datos.
2. **SSAP (Source Service Access Point):**
    - Indica el punto de acceso al servicio del origen, o qué capa superior en el dispositivo emisor envió los datos.
3. **FCS (Frame Check Sequence):**
    - Un conjunto de bits utilizados para verificar la integridad de la trama.
    - Detecta errores que pueden haber ocurrido durante la transmisión.

![[archivos/imagenes/Pasted image 20241125104909.png]]

### **Relación Entre LLC y MAC**
- La subcapa **LLC** es independiente de la tecnología del medio físico. Esto significa que los mismos mecanismos de control de flujo y errores pueden usarse sobre cualquier tecnología subyacente.
- La subcapa **MAC**, en cambio, está directamente relacionada con el medio de transmisión y varía según el tipo de red:
    - Ethernet tiene sus propias reglas para el acceso al medio, diferentes de las usadas en Token Ring o Wi-Fi.
- **Un LLC puede trabajar con múltiples MACs**, lo que hace al modelo IEEE 802 modular y flexible.

### **Resumen**
- La **capa LLC** proporciona abstracción y control general sobre los datos, mientras que la **capa MAC** gestiona el acceso al medio físico.
- El modelo IEEE 802 permite que diferentes tecnologías de red compartan un diseño básico, promoviendo la interoperabilidad entre dispositivos y protocolos.

![[archivos/imagenes/Pasted image 20241125105005.png]]

# Direcciones MAC Ethernet
La arquitectura de redes combina diferentes tipos de direcciones para identificar dispositivos y facilitar la comunicación. En este contexto, las **direcciones MAC** y las **direcciones IP** desempeñan roles complementarios.

### **Direcciones MAC en Ethernet**
#### **¿Qué es una dirección MAC?**
- La **dirección MAC (Media Access Control)** es un identificador único asignado a cada adaptador de red o interfaz de red.

- Tiene sentido únicamente dentro de una red local (LAN), ya que se utiliza para identificar dispositivos en el nivel de la **capa de enlace** del modelo OSI.

- Es una dirección física, grabada generalmente en la memoria ROM del adaptador Ethernet durante su fabricación.

#### **Estructura de la dirección MAC**
- **Longitud:** 6 bytes (48 bits).
- **Formato:** Se representa en hexadecimal, normalmente separado por dos puntos o guiones. Ejemplo: `00:1A:2B:3C:4D:5E`.
- **Unicidad:** Para garantizar que las direcciones no se repitan:
    - Los primeros 3 bytes (24 bits) representan un **OUI (Organizationally Unique Identifier)**, asignado al fabricante por la IEEE.
    - Los últimos 3 bytes (24 bits) son asignados por el fabricante para identificar de forma única cada dispositivo.

---

#### **Direcciones Especiales en Ethernet**
1. **Unicast:**
    - Se usa para identificar un único dispositivo en la red.
    - Una trama con una dirección unicast de destino es procesada solo por el dispositivo cuyo adaptador tiene esa dirección MAC.

2. **Broadcast:**
    - Direcciones con **todos los bits en 1** (`FF:FF:FF:FF:FF:FF`).
    - Se utilizan para enviar tramas a **todos los dispositivos** de una red local.
    - Ejemplo: Cuando un nodo necesita enviar una solicitud ARP para encontrar la dirección MAC de otro nodo.

3. **Multicast:**
    - Direcciones en las que el **bit menos significativo del primer byte** es `1`.
    - Permite enviar tramas a un **grupo específico de dispositivos** en la red.
    - Ejemplo: Tramas utilizadas para streaming de video o aplicaciones de conferencia.

4. **Modo promiscuo:**
    
    - En este modo, un adaptador puede aceptar **todas las tramas**, independientemente de su dirección de destino.
    - Útil para herramientas de diagnóstico y análisis de redes, como los analizadores de paquetes (sniffers).
    - Puede activarse manualmente con comandos como `ifconfig eth0 promisc`.


### **El Protocolo ARP (Address Resolution Protocol)**
El protocolo ARP es esencial para traducir las direcciones IP, que son lógicas y funcionan en la capa de red, a direcciones MAC, necesarias en la capa de enlace para la transmisión física de datos.

#### **Funcionamiento del ARP**
1. **Consulta en la caché ARP:**
    - Cuando un dispositivo necesita enviar datos a una dirección IP, primero consulta la **tabla de caché ARP** para verificar si ya tiene la dirección MAC correspondiente.
    - Si la entrada existe, se utiliza directamente.

2. **Solicitud ARP (Broadcast):**
    - Si la dirección IP no está en la tabla, se envía una solicitud ARP a través de la red local usando una **trama de broadcast**.
    - Ejemplo: "¿Quién tiene la dirección IP 192.168.1.10?".

3. **Respuesta ARP (Unicast):**
    - El dispositivo con la dirección IP indicada responde con su dirección MAC en una **trama unicast**.
    - Ejemplo: "192.168.1.10 está en la dirección MAC 00:1A:2B:3C:4D:5E".

4. **Actualización de la caché:**
    - La dirección MAC recibida se almacena en la **tabla de caché ARP** para uso futuro.
    - Las entradas en la caché tienen una duración limitada (por defecto, 15 minutos).

![[archivos/imagenes/Pasted image 20241125110006.png]]

#### **Limitaciones del ARP**
- **Solo funciona dentro de una red local (LAN):** No puede resolver direcciones más allá del enrutador.
- **Vulnerabilidad a ataques ARP spoofing:** Un atacante puede enviar respuestas ARP falsas, redirigiendo el tráfico a su dispositivo.

### **Relación Entre Direcciones MAC e IP**
1. **Dentro de la LAN:**
    - Las direcciones MAC se usan para la comunicación entre dispositivos conectados al mismo segmento de red.
    - Las cabeceras MAC son esenciales en las tramas Ethernet para identificar los nodos origen y destino.

2. **Fuera de la LAN:**
    - Cuando un paquete debe salir de la red local, el enrutador elimina las cabeceras de la capa de enlace (incluyendo la MAC).
    - El paquete viaja a través de la red usando direcciones IP.


### **Formato General de Tramas Ethernet**
Las tramas Ethernet contienen varios campos clave:

|**Campo**|**Descripción**|
|---|---|
|**Destino MAC**|Dirección MAC del receptor.|
|**Origen MAC**|Dirección MAC del emisor.|
|**DSAP**|Punto de acceso al servicio de destino.|
|**SSAP**|Punto de acceso al servicio de origen.|
|**Control LLC**|Información de control para la subcapa LLC.|
|**Datagrama IP**|Datos encapsulados provenientes de la capa de red (pueden ser IP, ARP, etc.).|
|**FCS (Frame Check)**|Secuencia de comprobación para detectar errores en la transmisión.|

### **Resumen**
- Las **direcciones MAC** son fundamentales en la comunicación local dentro de la LAN, mientras que las **direcciones IP** permiten la comunicación global a través de Internet.

- **ARP** asegura la interoperabilidad entre estas dos capas, resolviendo direcciones IP en MAC para el correcto envío de datos.

- El modelo Ethernet, definido en IEEE 802.3, organiza las tramas de forma eficiente y asegura un mecanismo confiable para transmitir datos en redes cableadas.


# Ethernet
Ethernet es un estándar ampliamente utilizado para redes LAN (Local Area Network). Su simplicidad y versatilidad lo han convertido en el tipo de red más común. Se caracteriza por ser una red **de difusión** y proporcionar un servicio **no fiable**, lo que significa que no garantiza la entrega de datos, dejando el control de errores a capas superiores (como TCP).

### **Características de Ethernet**
1. **Topologías de red:**
    - **Bus:**
        - Usada en versiones antiguas de Ethernet, conecta todos los dispositivos a través de un único cable coaxial.
        - Si hay una interrupción en el cable, toda la red queda inoperativa.

    - **Estrella:**
        - Usada en versiones modernas, conecta cada dispositivo mediante un par trenzado a un **conmutador** (*switch*) o **concentrador** (*hub*).
        - Es más fiable, ya que un fallo en un dispositivo o cable no afecta a los demás.

![[archivos/imagenes/Pasted image 20241125110859.png]]

2. **Medios físicos soportados:**
    - **Cable coaxial:** Usado en versiones antiguas.
    - **Par trenzado:** Muy común en redes modernas por su relación costo-eficiencia.
    - **Fibra óptica:** Usada en redes de alta velocidad y largas distancias.

3. **Velocidades soportadas:**
    
    - Ethernet soporta diversas velocidades, adaptándose a las necesidades:
        - **10 Mbps** (Ethernet estándar)
        - **100 Mbps** (Fast Ethernet)
        - **1 Gbps** (Gigabit Ethernet)
        - **10 Gbps** o más (Ethernet de alta velocidad).


### **Formato de la trama Ethernet**
La trama Ethernet es la unidad básica de transmisión. Contiene una cabecera específica para garantizar la comunicación eficaz.
1. **Cabecera:**
    - **Preámbulo:**
        - **7 bytes** con el patrón `10101010` repetido.
        - Permite sincronizar al receptor con el emisor.
    - **SFD (Start of Frame Delimiter):**
        - **1 byte** con el patrón `10101011`.
        - Indica el inicio de la trama.

2. **Tamaño de la trama:**
    - **Tamaño mínimo:**
        - 64 bytes, incluyendo cabeceras y datos. Esto asegura que las colisiones se detecten antes de que termine la transmisión.
    - **Tamaño máximo:**
        - 1528 bytes.

![[archivos/imagenes/Pasted image 20241125111045.png]]

### **Difusión y control de acceso: CSMA/CD**
Ethernet utiliza el protocolo **CSMA/CD** (_Carrier Sense Multiple Access with Collision Detection_), un método para gestionar el acceso al medio compartido.

#### **Funcionamiento:**
1. **Recepción:**
    - Todos los adaptadores conectados a la red están constantemente escuchando el medio.

2. **Transmisión:**
    - **Escuchar el medio:**
        - Antes de transmitir, el adaptador verifica si el medio está ocupado.
    - **Decisiones:**
        - Si el medio está **libre**, comienza a transmitir.
        - Si el medio está **ocupado**, espera a que quede libre y deja un intervalo de seguridad antes de intentar transmitir.


### **Colisiones en Ethernet**
Una **colisión** ocurre cuando dos nodos transmiten al mismo tiempo y sus señales se superponen en el medio. Ethernet, al ser una red de difusión, es susceptible a estas colisiones.

#### **Detección de colisiones:**
- El nodo transmisor escucha el medio mientras transmite. Si detecta una colisión (señal alterada), detiene la transmisión.

- **Tiempo de vulnerabilidad:**
    - Existe un período en el que un nodo puede creer que el medio está libre mientras otra señal está en tránsito. Para evitar esto:  

 $Tamaño\ mínimo\ de\ la\ trama > 2 \cdot Tiempo\ de\ propagación\ (tamprop)$


---

### **Respuesta a colisiones: Secuencia de interferencia y Backoff exponencial**
1. **Jamming sequence:**
    
    - Al detectar una colisión, el nodo transmite una secuencia de **32 bits** conocida como **secuencia de interferencia** (_jamming sequence_), para garantizar que todos los nodos detecten la colisión.
2. **Exponential backoff (espera exponencial binaria):**
    
    - Divide el tiempo en ranuras de longitud proporcional a 
		$T = 2 \cdot \text{tam}_{\text{propMáx}}$
    - **Primera colisión:**
        - El nodo espera un tiempo aleatorio de 00 o TT antes de reintentar.
    - **Colisiones subsecuentes:**
        - El tiempo de espera aumenta exponencialmente:
            - Segunda colisión: $0,T,2T,3T$.
            - Hasta 10 colisiones: hasta $1023T$.
    - **Límite de reintentos:**
        - Tras **16 colisiones consecutivas**, el nodo desiste e informa del fallo.

---

### **Ventajas y desventajas de Ethernet**

|**Ventajas**|**Desventajas**|
|---|---|
|Es **sencillo y económico** de implementar.|No garantiza la entrega de datos (no fiable).|
|Ofrece **alta velocidad** y escalabilidad.|Sensible a colisiones en entornos congestionados.|
|Es compatible con múltiples medios físicos.|El rendimiento decrece con un gran número de nodos.|

Ethernet ha evolucionado desde sus primeras versiones para soportar redes más rápidas, confiables y eficientes, adaptándose a entornos modernos gracias a tecnologías como Ethernet full-duplex y switches que eliminan las colisiones.

### Tecnologías Ethernet
#### **Repetidores**
Los repetidores son dispositivos de la **capa física** del modelo OSI que trabajan exclusivamente a nivel de **bits individuales**. Su función principal es extender la distancia de transmisión copiando y regenerando los bits que reciben por una interfaz y enviándolos al resto de interfaces conectadas.

**Características principales:**
- Operan únicamente en la capa física (nivel 1).
- No procesan direcciones ni contenido de las tramas.
- Utilizados en **topologías bus** (obsoletas) y, en menor medida, en **topologías estrella**.
- Limitados en cantidad (hasta 4 repetidores) en redes Ethernet antiguas.

![[archivos/imagenes/Pasted image 20241125113116.png]]

#### **Topología Bus (Obsoleta)**
Esta fue una de las primeras configuraciones utilizadas en redes Ethernet.

**Descripción:**
- Consiste en un **bus único** de cable coaxial al que se conectan los adaptadores mediante conectores **T**.
- En cada extremo del bus, hay **terminadores** para evitar reflexiones de señal.
- Los adaptadores transmiten y reciben señales eléctricas a través del cable.

**Limitaciones:**
- Soporta un número limitado de adaptadores por segmento.
- No permite más de **4 repetidores** entre extremos.
- La **distancia máxima** está definida por la especificación del estándar utilizado.

**Nomenclatura:** El formato de las denominaciones sigue este patrón: **[Mbps][tipo de transmisión][centenas de metros]**.

- Ejemplo:
    - `10Base2`:
        - Velocidad de 10 Mbps.
        - Banda base (sin modulación).
        - Segmentos de hasta 200 metros.

![[archivos/imagenes/Pasted image 20241125113137.png]]

#### **Topología Estrella**
Es la **configuración predominante en redes Ethernet modernas**.

**Descripción:**
- Cada nodo está conectado mediante un **par trenzado** o **fibra óptica** a un dispositivo central (hub o conmutador).
- La comunicación entre nodos siempre pasa a través de este dispositivo central.

**Características:**
- **Par trenzado:**
    - Distancia máxima: **100 metros**.
    - Para velocidades superiores a **1000 Mbps**, requiere **4 pares trenzados**.
- **Fibra óptica:**
    - Soporta mayores distancias y velocidades.

**Nomenclatura:** Incluye letras que identifican el medio de transmisión:

- **T**: Par trenzado.
- **F, S, L, E**: Fibra óptica.
- Ejemplo:
    - `1000Base-T`:
        - Velocidad de 1 Gbps.
        - Par trenzado como medio físico.

![[archivos/imagenes/Pasted image 20241125113156.png]]

#### **Hubs (Concentradores)**
Un **hub** es un dispositivo simple que también opera en la **capa física** del modelo OSI.

**Funcionamiento:**
- Regenera y retransmite los bits que recibe por una interfaz a **todas las demás interfaces**.
- No distingue entre las tramas que transmite, lo que puede generar **colisiones** si dos adaptadores transmiten simultáneamente.

**Estado actual:**

- Han quedado obsoletos y han sido reemplazados por dispositivos más avanzados como **switches**.

![[archivos/imagenes/Pasted image 20241125113215.png]]

#### **Bridges (Puentes) y Switches (Conmutadores)**
Los bridges y switches operan en las capas **física** y **de enlace**. Su objetivo principal es procesar tramas Ethernet, filtrar tráfico y evitar colisiones.

![[archivos/imagenes/Pasted image 20241125113235.png]]

**Diferencias entre bridges y switches:**
- **Bridges:**
    - Tienen pocas interfaces (generalmente 2 o 4).
    - Ya no se utilizan en redes modernas.
- **Switches:**
    - Soportan **decenas de interfaces**.
    - Reemplazaron a los bridges debido a su mayor capacidad.

**Capacidades:**
1. **Procesamiento de tramas:**
    - Inspeccionan campos como la **dirección destino** para decidir el reenvío.
    - Detectan y descartan tramas con **errores**.
2. **Colas de salida:**
    - Gestionan el tráfico en interfaces ocupadas almacenando tramas temporalmente.
3. **Autoaprendizaje:**
    - Construyen una **tabla de reenvío** dinámica.
    - La tabla almacena:
        - Dirección MAC.
        - Interfaz asociada.
        - Tiempo de última actualización.
    - Inicialmente, la tabla está vacía, y el dispositivo recurre a **difusión**.

![[archivos/imagenes/Pasted image 20241125113359.png]]

**Funcionamiento:**
- Si la dirección de destino está en la tabla:
    - La trama se reenvía únicamente por la interfaz correspondiente, evitando colisiones y mejorando la eficiencia.
    - Si la interfaz origen coincide con la de destino, se filtra la trama.
- Si no está en la tabla:
    - El switch utiliza **difusión** para localizar al adaptador.

![[archivos/imagenes/Pasted image 20241125113314.png]]

**Ventajas:**

- **Aislamiento de tráfico:** Solo los nodos involucrados ven la transmisión.
- **Tasa de transmisión agregada:** Permiten múltiples transmisiones simultáneas.



#### **Switches vs Routers**
Aunque ambos son dispositivos de almacenamiento y reenvío, operan en capas diferentes:

|**Característica**|**Switch**|**Router**|
|---|---|---|
|**Capa OSI**|Enlace (2)|Red (3)|
|**Datos procesados**|Tramas Ethernet|Paquetes IP|
|**Tabla gestionada**|Tabla de conmutación|Tabla de rutas|
|**Algoritmos**|Autoaprendizaje|Encaminamiento|

**Dispositivos combinados:** En dispositivos de red modernos, como los ofrecidos por los **ISPs**, se integran funciones de:

- Router.
- Switch.
- **NAT** (Traducción de Direcciones de Red).

![[archivos/imagenes/Pasted image 20241125113428.png]]

### VLANs (Redes de Área Local Virtuales)
Las **VLANs** (Virtual Local Area Networks) o **Redes de Área Local Virtuales** son una solución innovadora que permite segmentar redes físicas en múltiples redes lógicas, con el objetivo de mejorar la organización, seguridad y eficiencia de las redes de área local. Son particularmente útiles para resolver los problemas que surgían en redes tradicionales, especialmente en entornos institucionales o corporativos, donde los dispositivos estaban distribuidos en varias ubicaciones físicas.

### Problemas de las Redes LAN Tradicionales
Antes de la implementación de VLANs, las redes LAN estaban basadas en la topología física de los switches. Esta estructura presentaba varios inconvenientes importantes:

1. **Movilidad limitada de los usuarios:**
    
    - Si un usuario se trasladaba de un departamento a otro, pero el nuevo departamento estaba conectado a un switch diferente, perdía la conexión con su VLAN original. Esto requería configuraciones manuales y problemas en la asignación de direcciones IP.
2. **Un solo dominio de broadcast:**
    
    - En una LAN tradicional, todo el tráfico de broadcast (como las tramas ARP o DHCP) se difundía a todos los dispositivos conectados al switch. Esto causaba que las redes crecieran y se volvieran menos eficientes a medida que aumentaba el número de dispositivos, lo que resultaba en un mayor tráfico innecesario.
3. **Uso ineficiente de los switches:**
    
    - Cada switch físico tenía un número limitado de puertos, lo que restringía la expansión de la red. Además, los switches sólo podían formar parte de una única LAN, lo que implicaba que las redes estaban sobrecargadas y no podían optimizarse para diferentes necesidades dentro de la misma infraestructura física.

### Solución: VLANs
Las VLANs abordan estos problemas al permitir la segmentación lógica de una red física, creando varias redes lógicas independientes sobre una misma infraestructura física. De este modo, se puede mejorar la eficiencia de la red, mantener la seguridad y reducir el tráfico de broadcast.

**Características principales de las VLANs:**

1. **Aislamiento de tráfico:**
    
    - Cada VLAN actúa como una red independiente, de modo que solo los dispositivos que pertenecen a la misma VLAN pueden comunicarse directamente entre sí. Este aislamiento mejora la seguridad, ya que las tramas de una VLAN no son accesibles para dispositivos de otras VLANs, a menos que se implemente un mecanismo de reenvío o enrutamiento entre VLANs.
2. **Pertenencia dinámica:**
    
    - Los puertos de los switches pueden ser asignados dinámicamente a diferentes VLANs mediante **protocolos de administración**. Esto permite que los usuarios se conecten a la VLAN correspondiente sin necesidad de intervención manual cada vez que se mueven a otro departamento o ubicación física.
3. **Reconfiguración por software:**
    
    - Una de las principales ventajas de las VLANs es que se pueden reconfigurar **por software**. No es necesario cambiar la infraestructura física del cableado o los dispositivos, ya que las VLANs se gestionan a nivel de software en los switches.
4. **Reducción de tráfico de broadcast:**
    
    - Al segmentar una red en múltiples VLANs, se limita el tráfico de broadcast a los dispositivos dentro de la misma VLAN, evitando que toda la red se vea afectada por mensajes de difusión innecesarios.

### Implementación de VLANs
#### **VLANs Basadas en Puertos**
Una de las formas más comunes de implementar VLANs es mediante **VLANs basadas en puertos**. En esta configuración, los switches dividen sus puertos en grupos, y cada grupo pertenece a una VLAN específica. Esta asignación es gestionada mediante una **tabla de puertos/VLAN**, que indica qué puertos están asociados con qué VLAN.

**Funcionamiento:**

- Cuando un dispositivo conectado a un puerto de un switch transmite datos, esos datos (tramas) solo se entregan a otros dispositivos que estén conectados a puertos pertenecientes a la misma VLAN.
- Este enfoque garantiza el **aislamiento de tráfico** entre VLANs, lo que mejora la eficiencia y la seguridad de la red.
- Por ejemplo, si un puerto está configurado para la VLAN 10, solo los dispositivos en la VLAN 10 podrán comunicarse directamente con el dispositivo conectado a ese puerto.

**Ventajas de las VLANs basadas en puertos:**

- **Aislamiento de tráfico:** Las tramas solo se entregan a puertos dentro de la misma VLAN, lo que garantiza que el tráfico no se mezcle entre diferentes segmentos de la red.
- **Flexibilidad:** Se pueden crear VLANs y modificar las asignaciones de puertos sin alterar físicamente la infraestructura de red.
- **Optimización de recursos:** Evita que los puertos del switch se utilicen de manera ineficiente, ya que cada puerto puede ser asignado de acuerdo con las necesidades de cada grupo o departamento.

![[archivos/imagenes/Pasted image 20241125113721.png]]

![[archivos/imagenes/Pasted image 20241125113801.png]]

#### **Estándar IEEE 802.3Q**

La implementación de VLANs en switches modernos sigue el estándar IEEE **802.3Q**. Este estándar define cómo se agregan los campos adicionales a las cabeceras de las tramas Ethernet para identificar a qué VLAN pertenece cada trama. Este campo adicional se llama **"Etiqueta VLAN" (VLAN Tag)** y contiene información sobre la VLAN de origen y destino.

- El estándar **IEEE 802.3Q** permite que las tramas Ethernet viajen a través de enlaces troncales (que conectan switches) sin que se pierda la información de la VLAN a la que pertenecen. Esto se logra mediante la inclusión de la **etiqueta VLAN** en la cabecera de la trama.

#### **Encaminamiento entre VLANs**

Aunque las VLANs proporcionan aislamiento de tráfico, en muchas situaciones es necesario que los dispositivos de diferentes VLANs puedan comunicarse entre sí. Este proceso se denomina **reenvío entre VLANs** y se realiza utilizando un **router** o un **switch de capa 3**.

- **Encaminamiento entre VLANs:** Para que las VLANs puedan comunicarse entre ellas, se utilizan **routers** o **switches de capa 3**, que son dispositivos capaces de procesar el tráfico de la capa de red (IP) y enrutar las tramas de una VLAN a otra.
- Los **switches de capa 3** pueden realizar el trabajo de enrutamiento sin necesidad de un router dedicado, facilitando la comunicación entre VLANs mientras mantienen el aislamiento de cada una a nivel de capa de enlace (Ethernet).

### Resumen

Las VLANs son una solución poderosa para segmentar redes de área local físicas en múltiples redes lógicas, lo que resuelve problemas comunes como la movilidad de los usuarios, el dominio de broadcast único y la eficiencia de los switches. Al permitir la reconfiguración dinámica de la red por software y el aislamiento de tráfico entre VLANs, las VLANs ofrecen una manera flexible y eficiente de gestionar grandes redes corporativas, institucionales y otras configuraciones complejas de red.

# Conmutación de etiquetas multiprotocolo

### **¿Qué es MPLS?**
MPLS es una tecnología que combina características de las redes basadas en circuitos virtuales (como ATM o Frame Relay) y de las redes basadas en conmutación de paquetes (como IP). En lugar de depender únicamente de las direcciones IP para tomar decisiones de encaminamiento, MPLS utiliza **etiquetas (labels)** para decidir cómo se reenvían los paquetes en la red.


### **Red de circuitos virtuales en un entorno IP**
- **Circuitos virtuales**: En MPLS, un flujo de datos sigue un camino preestablecido conocido como un **LSP** (Label Switched Path, o Ruta con Conmutación de Etiquetas). Este comportamiento es similar al de una red basada en circuitos virtuales, donde se establece un "camino lógico" antes de enviar datos.
- **Conmutación basada en etiquetas**: En lugar de examinar la dirección IP completa de un paquete, los routers (llamados aquí **LSR**, Label Switching Routers) analizan etiquetas de longitud fija. Esto simplifica y acelera el proceso de encaminamiento.

---

### **¿Capa de red o capa de enlace?**
- **Punto de vista pedagógico**: MPLS tiene un comportamiento peculiar porque no encaja estrictamente en una capa única del modelo OSI. Se encuentra entre la **capa de red (3)** y la **capa de enlace (2)**. Por eso, a menudo se le llama un protocolo "2.5".
- **Punto de vista de Internet**: Desde una perspectiva práctica, MPLS se implementa típicamente como una extensión de la **capa de enlace** (porque no reemplaza a IP, sino que trabaja junto a ella para optimizar el reenvío).

---

### **Componentes clave de MPLS**
1. **Etiqueta MPLS**:  
    Cada paquete que entra en una red MPLS recibe una etiqueta. Esta etiqueta contiene información que permite a los routers identificar el LSP asignado al paquete.
    
    La etiqueta incluye:
    
    - **20 bits**: Identificación del LSP.
    - **3 bits**: Clase de servicio (QoS, para priorizar paquetes).
    - **1 bit**: Indica si la etiqueta es la última (Bottom of Stack, BOS).
    - **8 bits**: TTL (Time to Live, para evitar bucles).
2. **Encapsulación**:
    
    - MPLS introduce su etiqueta entre la cabecera de enlace (por ejemplo, Ethernet) y la cabecera IP del paquete.
    - Formato típico:
        
        ```
        | Cabecera enlace (Ethernet) | Etiqueta MPLS | Cabecera IP | Datos |
        ```
        
3. **Routers MPLS**:
    
    - **LER (Label Edge Router)**: Son los routers en los bordes de la red MPLS que asignan y eliminan etiquetas.
    - **LSR (Label Switching Router)**: Son los routers dentro de la red MPLS que leen las etiquetas y reenvían los paquetes basándose en ellas.

![[archivos/imagenes/Pasted image 20241125114410.png]]

### **¿Cómo funciona MPLS?**

1. **Asignación de etiquetas**: Cuando un paquete entra en la red MPLS, un **LER** asigna una etiqueta al paquete basada en su dirección IP o en otro criterio.
2. **Reenvío basado en etiquetas**: Los **LSR** dentro de la red MPLS no analizan la cabecera IP del paquete. En su lugar, consultan una tabla de conmutación de etiquetas (Label Forwarding Information Base, LFIB) para reenviar el paquete al siguiente salto en el LSP.
3. **Eliminación de etiquetas**: Cuando el paquete alcanza el **LER** de salida, este elimina la etiqueta antes de enviar el paquete al destino final.

![[archivos/imagenes/Pasted image 20241125114437.png]]

### **Objetivos de MPLS**

1. **Optimizar el reenvío de paquetes**:
    - Usando etiquetas de longitud fija, MPLS puede reenviar paquetes más rápidamente que un sistema basado únicamente en IP.
2. **Flexibilidad y escalabilidad**:
    - Permite implementar servicios avanzados como VPN, ingeniería de tráfico (traffic engineering) y QoS.
3. **Compatibilidad con infraestructuras existentes**:
    - MPLS funciona conjuntamente con IP, reutilizando el direccionamiento y el encaminamiento existentes.

---

### **¿Cómo mezcla técnicas de circuitos virtuales y datagramas?**

- **De circuitos virtuales**:
    - Establece rutas predecibles y dedicadas (LSP) antes de enviar los datos.
- **De datagramas**:
    - No es necesario reservar recursos físicos como en ATM o Frame Relay. Los paquetes se reenvían dinámicamente según las etiquetas.

---

### **Ejemplo práctico**

Imagina una empresa que necesita conectar oficinas en distintas ciudades:

1. Los paquetes IP que van de una oficina a otra entran en la red MPLS.
2. El LER en la entrada asigna etiquetas a los paquetes según su destino.
3. Los LSR dentro de la red leen solo las etiquetas y reenvían los paquetes rápidamente sin procesar las cabeceras IP.
4. El LER de salida elimina las etiquetas y entrega los paquetes al destino.

### **Conclusión**

MPLS es una tecnología que combina lo mejor de dos mundos (circuitos virtuales y conmutación de paquetes). Mejora la velocidad y eficiencia del reenvío en redes complejas mientras mantiene compatibilidad con protocolos tradicionales como IP. Aunque se clasifica como tecnología de la capa de enlace desde el punto de vista de Internet, tiene características que también la acercan a la capa de red.



# WLAN
WLAN significa **red de área local inalámbrica** y se basa en el estándar IEEE 802.11, que define cómo se comunican los dispositivos inalámbricos (como routers, móviles, laptops, etc.) usando Wi-Fi.

El estándar 802.11 tiene varias versiones (b, a, g, n, etc.), y cada una mejora aspectos como la velocidad, el alcance, y la resistencia a interferencias. Aquí te explico cada versión:

### **Especificaciones Wi-Fi 802.11** (de peor a mejor):

1. **802.11b**:
    
    - **Frecuencia**: Usa 2.4 GHz.
    - **Tecnología**: DSSS (Direct Sequence Spread Spectrum).
    - **Velocidad máxima**: Hasta 11 Mbps.
    - **Características**:
        - Fue uno de los primeros estándares ampliamente adoptados.
        - Tiene **poco alcance** y es muy susceptible a **interferencias** porque comparte la banda de 2.4 GHz con dispositivos como microondas y teléfonos inalámbricos.
2. **802.11a**:
    
    - **Frecuencia**: Usa 5 GHz.
    - **Tecnología**: OFDM (Orthogonal Frequency Division Multiplexing), una técnica avanzada para dividir la señal en múltiples subcanales.
    - **Velocidad máxima**: Hasta 54 Mbps.
    - **Características**:
        - La frecuencia de 5 GHz genera **menos interferencias** porque está menos congestionada.
        - Sin embargo, el alcance es aún **menor que 802.11b** debido a que las señales de 5 GHz no penetran bien obstáculos como paredes.
        - Originalmente se usó más en entornos militares.
3. **802.11g**:
    
    - **Frecuencia**: Usa 2.4 GHz.
    - **Tecnología**: OFDM/DSSS (híbrido).
    - **Velocidad máxima**: Hasta 54 Mbps.
    - **Características**:
        - Combina las ventajas de **802.11b** (más alcance por usar 2.4 GHz) y **802.11a** (menos interferencias y mejor modulación).
        - Fue el estándar más usado durante años porque equilibraba velocidad, alcance y compatibilidad.
4. **802.11n**:
    
    - **Frecuencia**: Puede usar tanto 2.4 GHz como 5 GHz (dual-band).
    - **Tecnología**: MIMO (Multiple Input Multiple Output), que utiliza múltiples antenas para mejorar el rendimiento.
    - **Velocidad máxima**: Hasta 600 Mbps, aunque en la práctica suele ser menos.
    - **Características**:
        - Mayor alcance que las versiones anteriores gracias a MIMO.
        - Menor interferencia, especialmente en la banda de 5 GHz.
        - Es compatible con dispositivos antiguos (b/g).

---

### **Redes Ad-hoc vs Redes Distribuidas**

1. **Redes simples (Ad-hoc)**:
    
    - Se crean directamente entre dispositivos sin necesidad de un punto de acceso (Access Point, AP).
    - Ejemplo: Conexiones entre dos PSP para jugar.
    - Características:
        - Son redes **temporales** y de **igual a igual** (peer-to-peer).
        - Solo funcionan mientras los dispositivos están **dentro del radio de alcance**.

![[archivos/imagenes/Pasted image 20241125115936.png]]

2. **Redes distribuidas (Managed)**:
    
    - Utilizan puntos de acceso (**Access Points, AP**) conectados a una **LAN cableada**.
    - Características:
        - Cada AP conecta a los dispositivos inalámbricos dentro de su radio y los comunica con la LAN troncal.
        - Se usan en redes Wi-Fi gestionadas, como en oficinas o en casa con routers Wi-Fi.

![[archivos/imagenes/Pasted image 20241125120007.png]]



### **MACA / CSMA/CA (Protocolo de acceso al medio)**

MACA (**Multiple Access with Collision Avoidance**) o **CSMA/CA** es el protocolo que evita colisiones en redes inalámbricas (donde no se pueden detectar colisiones como en Ethernet). Así funciona:

1. **Sondeo del medio**:
    
    - Un dispositivo que quiere transmitir verifica si el canal está libre.
    - Si el canal está libre:
        - Espera un intervalo llamado **DIFS** (Distributed Inter Frame Space) para asegurarse de que sigue libre.
        - Si aún está libre, comienza a transmitir.
    - Si el canal está ocupado:
        - Sigue esperando y usa un mecanismo de **backoff exponencial**:
            - El dispositivo espera un tiempo aleatorio creciente antes de intentarlo de nuevo.
2. **Confirmación de transmisión**:
    
    - No puede detectar colisiones directamente, así que confía en los **ACKs**:
        - Después de transmitir, el emisor espera un **ACK** (acuse de recibo) del receptor.
        - Si no recibe el ACK, supone que hubo un problema y reintenta la transmisión.
3. **Evitar conflictos con RTS/CTS**:
    
    - Antes de transmitir datos largos, el emisor usa tramas de control:
        - Envío de **RTS (Request to Send)**: Una solicitud para reservar el canal.
        - Respuesta del receptor con **CTS (Clear to Send)**: Indica que el canal está reservado.
    - Durante esta reserva, otros dispositivos en la red esperan hasta que la transmisión termine.
4. **Intervalos de espera**:
    
    - Hay dos tipos de intervalos clave:
        - **SIFS (Short Inter Frame Space)**: Es más corto y se usa para ACKs, lo que da prioridad a la finalización de transmisiones ya iniciadas.
        - **DIFS (Distributed Inter Frame Space)**: Es más largo y se usa para nuevas transmisiones.

---
![[archivos/imagenes/Pasted image 20241125120044.png]]

![[archivos/imagenes/Pasted image 20241125120055.png]]

![[archivos/imagenes/Pasted image 20241125120115.png]]


### **Ejemplo Práctico**

Supón que tienes un router Wi-Fi en casa y dispositivos como una laptop y un móvil:

1. **El móvil quiere enviar datos**:
    
    - Verifica si el canal está libre. Si lo está, envía los datos tras el intervalo DIFS.
    - Si el canal está ocupado, espera y reintenta según el algoritmo de backoff.
2. **El router confirma la recepción**:
    
    - Responde con un **ACK** si recibió los datos correctamente.
    - Si el móvil no recibe el ACK, reintenta.
3. **Otros dispositivos respetan las tramas RTS/CTS**:
    
    - Si el móvil y el router están transmitiendo, los demás dispositivos en la red esperan hasta que acaben.

---

### **Conclusión**

- Los estándares Wi-Fi (802.11b/a/g/n) mejoran en velocidad, alcance y resistencia a interferencias.
- Redes Ad-hoc son simples y temporales, mientras que las distribuidas son gestionadas con APs.
- MACA/CSMA/CA previene colisiones en redes inalámbricas usando sondeo del medio, ACKs, y tramas RTS/CTS para coordinar las transmisiones.

# Redes ATM
ATM es un tipo de red de telecomunicaciones diseñada para transmitir datos, voz y vídeo a alta velocidad. Estas redes son usadas comúnmente por los **proveedores de servicios de Internet (ISPs)** y en las **redes troncales de Internet** debido a su capacidad para manejar grandes volúmenes de tráfico con alta eficiencia.

### **Conceptos clave**:

- **Modo de transferencia asíncrono**:
    
    - Los datos no se transmiten a intervalos regulares, sino que las celdas se envían solo cuando hay datos que transmitir.
    - Esto permite un uso más eficiente del ancho de banda.
- **Integración con TCP/IP**:
    
    - ATM es capaz de trabajar con la arquitectura TCP/IP, lo que facilita su uso en redes modernas.

## **Tipos de servicio en ATM**
ATM ofrece varios tipos de servicio para diferentes necesidades, cada uno con características específicas:

1. **CBR (Constant Bit Rate)**:
    
    - **Garantiza una tasa constante de transmisión**.
    - Se diseñó para aplicaciones que requieren transmisión en tiempo real, como audio y vídeo.
    - Ejemplo: Videollamadas o transmisiones de televisión.
2. **ABR (Available Bit Rate)**:
    
    - **Garantiza una tasa mínima**, pero la velocidad máxima depende de la disponibilidad del ancho de banda.
    - Este es el tipo de servicio que los ISPs suelen usar cuando ofrecen conexiones "hasta x Mbps".
    - Ejemplo: Servicios de Internet residenciales.
3. **UBR (Unspecified Bit Rate)**:
    
    - No garantiza velocidad ni calidad.
    - Se usa para datos que pueden esperar cuando la red está congestionada.
    - Ejemplo: Envío de correos electrónicos.
4. **VBR (Variable Bit Rate)**:
    
    - Diseñado para aplicaciones con necesidades de tasa variable:
        - **VBR-rt** (real-time): Para transmisiones en tiempo real con requisitos de latencia estrictos.
        - **VBR-nrt** (non-real-time): Para datos que no requieren latencia baja, como transferencias de archivos.

## **Características de las redes ATM**

### **1. Paquetes pequeños y eficientes (Celdas de 53 bytes)**

- Las redes ATM usan **celdas** en lugar de paquetes tradicionales.
- **Tamaño fijo**: 53 bytes (5 bytes de cabecera y 48 bytes de datos).
- Ventajas:
    - Simplifica el procesamiento y la conmutación de las celdas, lo que permite **altas velocidades** (hasta Tbps).
    - Reduce la latencia, ya que los paquetes pequeños se procesan más rápido.

### **2. Circuitos virtuales (VC) orientados a conexión**

ATM es una red **orientada a conexión**, lo que significa que antes de transmitir datos:

1. **Solicitud de conexión**: El dispositivo emisor solicita una conexión con el receptor.
2. **Planificación de ruta**: La red determina la ruta para las celdas.
3. **Transmisión**: Las celdas llevan un identificador de canal virtual para seguir el circuito planificado.
4. **Desconexión**: Cuando la comunicación termina, el circuito virtual se elimina.

**Nota**: No hay retransmisiones ni ACKs (como en TCP), pero las celdas incluyen un control de errores en la cabecera para garantizar la integridad de los datos.

## **Capas de ATM**

ATM opera sobre una **capa física** y tiene una **capa de adaptación (AAL)** para permitir que diferentes protocolos utilicen la red.

1. **Adaptación de datos (AAL, ATM Adaptation Layer)**:
    
    - **Para TCP/IP**:
        - Divide los datagramas IP en fragmentos que caben en celdas de 48 bytes.
        - Reensambla los fragmentos al llegar al destino.
    - **Para audio/vídeo**:
        - Agrupa datos hasta llenar una celda.
2. **Flexibilidad en la capa física**:
    
    - ATM puede funcionar sobre cualquier tecnología física (como fibra óptica, cable coaxial, etc.).

![[archivos/imagenes/Pasted image 20241125120225.png]]

## **Identificación de circuitos virtuales**

Los circuitos virtuales de ATM se gestionan en dos niveles:

1. **VCC (Virtual Channel Connection)**:
    
    - Identifica los canales virtuales.
    - Cada canal virtual es una conexión lógica para un flujo de datos.
2. **VPC (Virtual Path Connection)**:
    
    - Es un grupo de VCCs que comparten el mismo origen y destino.
    - Facilita la gestión al tratar varios canales como un solo camino.

![[archivos/imagenes/Pasted image 20241125120441.png]]

## **Estructura de las celdas ATM**

Cada celda de 53 bytes tiene la siguiente estructura:

|Campo|Tamaño|Descripción|
|---|---|---|
|**GFC**|4 bits|(Generic Flow Control): Control de flujo para QoS, usado solo en la interfaz usuario-red.|
|**VPI**|8 bits|(Virtual Path Identifier): Identifica el camino virtual (VPC).|
|**VCI**|16 bits|(Virtual Channel Identifier): Identifica el canal virtual dentro del camino.|
|**Tipo**|3 bits|Indica el tipo de celda (datos, gestión, etc.).|
|**CLP**|1 bit|(Cell Loss Priority): Prioridad de pérdida. Si es 1, la celda puede descartarse en congestión.|
|**CRC**|8 bits|(Cyclic Redundancy Check): Control de errores en la cabecera.|
|**Datos**|48 bytes|Contiene los datos transmitidos.|

![[archivos/imagenes/Pasted image 20241125120455.png]]

## **Ventajas de ATM**

1. **Velocidades muy altas**:
    - Los switches de ATM pueden operar a velocidades de **terabits por segundo (Tbps)**.
2. **Flexibilidad**:
    - Puede manejar datos, voz y vídeo simultáneamente.
3. **QoS (Calidad de Servicio)**:
    - Proporciona diferentes niveles de servicio según las necesidades de la aplicación.

---

## **Desventajas de ATM**

1. **Coste**:
    - La infraestructura de ATM es costosa, lo que ha limitado su adopción en redes domésticas.
2. **Complejidad**:
    - La necesidad de fragmentar y reensamblar datos añade complejidad al sistema.
3. **Obsolescencia**:
    - Tecnologías más recientes (como MPLS o Ethernet de alta velocidad) han reemplazado a ATM en muchas aplicaciones.

---

## **Ejemplo práctico de ATM**

Imagina que un proveedor de servicios de Internet (ISP) usa ATM para transmitir tráfico de red:

1. Un cliente envía datos desde su casa.
2. El ISP utiliza ATM para dividir esos datos en celdas pequeñas (53 bytes) y las envía a través de su red troncal.
3. Las celdas siguen un circuito virtual preestablecido, identificado por VPI y VCI.
4. Cuando llegan al destino, las celdas se reensamblan para reconstruir los datos originales.

---
# Ejemplo práctico
![[archivos/imagenes/Pasted image 20241125120839.png]]

Este ejemplo describe paso a paso cómo un dispositivo obtiene una dirección IP, resuelve un dominio a través de DNS, y finalmente establece una conexión con un servidor web para acceder a una página. Vamos a explicarlo en detalle, descomponiendo cada parte:

### **1. Inicio: Obtención de IP (DHCP)**
#### **Mensaje de solicitud DHCP**
- **Contexto**:  
    El portátil no tiene una IP, así que utiliza **DHCP (Dynamic Host Configuration Protocol)** para obtener una.
- **Detalles técnicos**:
    - **Segmento UDP**:
        - Puerto destino: **67** (servidor DHCP).
        - Puerto origen: **68** (cliente DHCP).
    - **Datagrama IP**:
        - IP destino: **255.255.255.255** (broadcast a toda la red).
        - IP origen: **0.0.0.0** (sin dirección configurada).
    - **Trama Ethernet**:
        - MAC destino: **ff:ff:ff:ff:ff:ff** (broadcast Ethernet).
        - MAC origen: Dirección del portátil: **00:16:d3:23:68:8a**.

#### **Primer envío**
- **El portátil envía esta trama** al conmutador Ethernet (switch).
- **El conmutador reenvía la trama por todos sus puertos** hasta que el router (servidor DHCP) la recibe.

#### **Procesamiento por el servidor DHCP**
1. El router extrae el datagrama IP y el segmento UDP.
2. Identifica que es un mensaje DHCP.
3. Asigna:
    - Una dirección IP para el portátil.
    - La IP del servidor DNS.
    - La puerta de enlace por defecto.
    - La máscara de subred.

#### **Mensaje ACK DHCP**
- El servidor DHCP responde con un mensaje ACK, que incluye toda esta información:
    - **Trama Ethernet**:
        - MAC destino: **00:16:d3:23:68:8a** (el portátil).
        - MAC origen: **00:22:6b:45:1f:1b** (el router).
- **El portátil recibe la trama**:
    - Extrae el datagrama IP.
    - Extrae el segmento UDP.
    - Obtiene los datos de configuración.

---

### **2. Resolución de DNS y ARP**
#### **Problema inicial**
El portátil quiere conectarse a **[www.google.com](http://www.google.com)**, pero solo tiene el dominio, no la IP. Por ello, realiza una consulta DNS.

#### **Consulta DNS**
- **Mensaje de consulta DNS**:
    - **Segmento UDP**:
        - Puerto destino: **53** (servidor DNS).
    - **Datagrama IP**:
        - IP destino: **68.87.71.226** (servidor DNS).
        - IP origen: Dirección del portátil: **68.85.2.101**.

#### **Descubrimiento de la MAC del router (ARP)**
- Antes de enviar la consulta DNS, el portátil necesita la dirección MAC de su router (puerta de enlace por defecto).
- **Consulta ARP**:
    - **Trama Ethernet**:
        - MAC destino: **ff:ff:ff:ff:ff:ff** (broadcast Ethernet).
        - Solicita la MAC asociada a la IP del router: **68.85.2.1**.
- **Respuesta ARP**:
    - El router responde con su MAC: **00:22:6b:45:1f:1b**.
- Ahora el portátil puede enviar la consulta DNS a través del router.

#### **Reenvío de la consulta DNS**
- El router envía el datagrama DNS al servidor DNS usando las rutas configuradas por protocolos como **OSPF, RIP** o **BGP**.

#### **Respuesta del servidor DNS**
- El servidor DNS resuelve **[www.google.com](http://www.google.com)**:
    - Encuentra la IP: **64.233.169.105**.
    - Crea un mensaje de respuesta con esta información.
- El mensaje viaja de regreso al portátil siguiendo el camino inverso.

---

### **3. Interacción cliente-servidor: TCP y HTTP**
#### **Establecimiento de conexión TCP**
1. **El portátil crea un socket TCP** para comunicarse con la IP **64.233.169.105** ([www.google.com](http://www.google.com)).
2. Se realiza el **acuerdo en tres fases (3-way handshake)**:
    - **SYN**:
        - Segmento TCP con bandera SYN (inicio de conexión).
        - Puerto destino: **80** (HTTP).
    - **SYNACK**:
        - El servidor web responde con un segmento SYNACK.
    - **ACK**:
        - El portátil responde con un ACK para confirmar la conexión.

#### **Solicitud HTTP**
1. El navegador genera un mensaje **HTTP GET** para solicitar la página web.
2. El mensaje HTTP:
    - Se convierte en la carga útil de un segmento TCP.
    - El segmento se incluye en un datagrama IP.
    - Se encapsula en una trama Ethernet.

#### **Reenvío del mensaje**

- La trama viaja por los routers de la red hasta el servidor web.
- Cada router extrae y reencapsula el datagrama según el enlace físico.

#### **Respuesta del servidor**
1. El servidor web **procesa el mensaje GET**.
2. Genera un mensaje HTTP de respuesta con el contenido de la página web.
3. Este mensaje:
    - Se convierte en la carga útil de un segmento TCP.
    - Se encapsula en un datagrama IP y una trama Ethernet.
4. La respuesta viaja de regreso al portátil.

#### **Renderización de la página web**
- El navegador del portátil:
    - Lee la respuesta del socket TCP.
    - Extrae el código HTML.
    - Renderiza la página en pantalla.


### **Resumen visual del proceso**
1. **Obtención de IP**:
    - DHCP asigna IP, DNS, y puerta de enlace.
2. **Resolución DNS**:
    - ARP descubre la MAC del router.
    - DNS resuelve el dominio a una IP.
3. **Conexión TCP**:
    - Establecimiento de conexión TCP con el servidor web.
4. **HTTP**:
    - Solicitud y recepción de la página web.
    - Renderización en el navegador.

