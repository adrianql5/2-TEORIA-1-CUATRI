
Escrito por **Adrián Quiroga Linares**.

# Concepto de Interfaz
Un **interfaz** define los **requisitos** que deben cumplir las clases en un programa, especificando **qué deben hacer** sin detallar **cómo**. Es fundamental para el diseño modular y colaborativo en software.

## Características de un Interfaz
1. **Definición de Tipos y Métodos**:
    - Especifica **datos y métodos obligatorios** para las clases que lo implementen.
    - Los métodos incluyen nombres, argumentos y tipos de retorno.
    - Las clases **pueden tener métodos adicionales, pero deben cumplir con los definidos en el interfaz**.
2. **Compromiso de Diseño**:
    - Representa un contrato entre desarrolladores, asegurando que las clases implementen los métodos requeridos.
3. **Objetivo**:
    - Garantizar la **interoperabilidad** y una **interacción eficiente** entre clases, independientemente de la implementación interna.
4. **Ventajas**:
    - **Colaboración independiente:** Permite dividir el trabajo sin conflictos.
    - **Independencia de implementación:** Los métodos pueden cambiar internamente sin afectar a las clases que los usan.
    - **Facilidad de mantenimiento:** Los interfaces actúan como puntos de referencia claros.


### Características principales:
1. **Definición**:
    - Contiene **constantes**, **métodos abstractos**, **métodos por defecto** y **métodos estáticos**.
    - Los atributos son siempre `public`, `static` y `final`.
2. **Restricciones**:
    - **No se pueden instanciar, ni tienen constructores.**
3. **Relación con Clases**:
    - Una clase que implementa un interfaz:
        - Debe implementar todos sus métodos abstractos.
        - Puede usar métodos por defecto o sobrescribirlos.
        - Puede llamar a métodos estáticos del interfaz.

### Polimorfismo y Herencia:
- **Herencia múltiple**:
    - Una clase puede implementar varios interfaces, evitando conflictos de implementación múltiple.
- **Jerarquías de Interfaces**:
    - Un interfaz puede extender a otros para crear jerarquías más específicas.

> [!Nota] 
> **Se declara como `public interface` y en la clase que se debe usar esta interfaz usamos `public class nombre implements interfaz`.**

![[archivos/imagenes/Pasted image 20241218162216.png]]

Una **interfaz es una clase abstracta que:**
- Tiene todos sus **métodos abstractos**
- Tiene todos sus atributos como **constantes** (*final y static*)
- **No tiene constructores**

# Clases Abstractas vs Interfaces
![[archivos/imagenes/Pasted image 20241205195051.png]]


# Métodos por defecto
## Problema principal en los interfaces
Los interfaces en programación tienen una **limitación clave**: las clases que los implementan **deben definir todos los métodos abstractos que se declaren en el interfaz**. Si se agregan nuevos métodos abstractos a un interfaz existente, **todas las clases que implementen ese interfaz generarán errores de compilación** hasta que se adapten para incluir la implementación de los nuevos métodos. Esto es problemático en proyectos grandes donde muchas clases dependen de un mismo interfaz, ya que un cambio en el interfaz obliga a modificar numerosas clases.

### Solución parcial: Métodos por defecto
Los **métodos por defecto** permiten que las interfaces incluyan métodos con una implementación por defecto, eliminando la necesidad de que todas las clases los implementen obligatoriamente. Esto facilita la evolución de las interfaces sin romper el código existente.

#### **Características de los métodos por defecto**
1. **Declaración e implementación en el interfaz**:
    - Se definen dentro del interfaz utilizando la palabra clave `default`.
    - Al tener una implementación por defecto, las clases que implementan el interfaz **heredan automáticamente** estos métodos.
2. **Uso de argumentos propios**:
    - Los métodos por defecto operan únicamente con sus argumentos, ya que en un interfaz no existen atributos no constantes.
3. **Sobrescritura opcional**:
    - Las clases que implementan el interfaz pueden sobrescribir los métodos por defecto para personalizar su comportamiento.

    - Si una clase sobrescribe un método por defecto, puede llamar a la implementación original utilizando `super`, especificando el nombre del interfaz:

        ```java
        <nombre_interfaz>.super.<método>();
        ```
        
4. **Compatibilidad con interfaces derivados**:
    - Los métodos por defecto son **heredados** por otros interfaces que extienden al interfaz original.
    - Las clases que implementan interfaces derivados también pueden sobrescribir estos métodos.

### Consideraciones sobre los métodos por defecto
1. **Complejidad del diseño**:
    - Si los métodos por defecto necesitan usar datos asociados a atributos de las clases, se vuelven difíciles de entender y mantener.
    - En tales casos, es preferible definir los métodos directamente en las clases en lugar de incluirlos como métodos por defecto en el interfaz.
2. **Limitaciones**:
    - No pueden acceder a atributos de la clase que los implementa, lo que puede llevar a una lógica limitada o a argumentos adicionales que podrían no ser necesarios si los métodos se definieran directamente en la clase.

#### **Ejemplo de un método por defecto**

```java
public interface Vehiculo {
    void arrancar(); // Método abstracto

    default void estado() { // Método por defecto
        System.out.println("El vehículo está en buen estado");
    }
}

public class Coche implements Vehiculo {
    @Override
    public void arrancar() {
        System.out.println("El coche está arrancando");
    }

    // Sobrescritura opcional del método por defecto
    @Override
    public void estado() {
        Vehiculo.super.estado(); // Llama al método por defecto
        System.out.println("El coche ha pasado la revisión.");
    }
}

public class Main {
    public static void main(String[] args) {
        Coche coche = new Coche();
        coche.estado(); // Llama al método sobrescrito
    }
}
```

---

# Métodos estáticos

## Definición y características

Los métodos estáticos son métodos que **no requieren la creación de una instancia** para ser utilizados. Se cargan en memoria al inicio del programa y están asociados directamente con la clase o el interfaz donde se definen, no con sus objetos.

1. **Acceso directo**
    - Se acceden utilizando el nombre de la clase o el interfaz, seguido del nombre del método.
    - No necesitan un objeto para ser invocados.
2. **Disponibilidad inmediata**:
    - Están disponibles desde el momento en que el programa comienza a ejecutarse.
3. **Contexto limitado**:
    - Dentro de un método estático solo se pueden invocar otros métodos estáticos o acceder a variables estáticas.
    - Esto se debe a que los métodos y variables no estáticos dependen de una instancia, mientras que los estáticos no.
4. **No son heredados**:
    - Los métodos estáticos definidos en un interfaz no se heredan en interfaces derivados ni en las clases que implementan el interfaz.
    - Para usarlos, deben invocarse directamente desde el interfaz.

## Ventajas de los métodos estáticos
- **Acceso global**:
    - Son útiles para operaciones generales que no dependen de datos específicos de una instancia, como cálculos matemáticos o utilidades comunes.
- **Eficiencia**:
    - Como no requieren instancias, reducen la sobrecarga asociada a la creación de objetos.

![[archivos/imagenes/Pasted image 20241218164032.png]]

# Diferencias clave entre métodos por defecto y estáticos

| **Característica**    | **Métodos por defecto**                                | **Métodos estáticos**                             |
| --------------------- | ------------------------------------------------------ | ------------------------------------------------- |
| **Implementación**    | Definidos con la palabra clave `default`               | Definidos con la palabra clave `static`           |
| **Herencia**          | Heredados por clases e interfaces derivados            | No se heredan                                     |
| **Uso en instancias** | Requieren una instancia del objeto                     | No requieren instancia                            |
| **Acceso**            | Accedidos mediante objetos que implementan el interfaz | Accedidos mediante el nombre del interfaz o clase |
| **Sobrescritura**     | Pueden ser sobrescritos                                | No pueden ser sobrescritos                        |

# Herencia e Interfaces

## Relación entre clases abstractas e interfaces
- Si una **clase abstracta** únicamente define métodos abstractos y constantes, se asemeja funcionalmente a un interfaz.
- Sin embargo, las clases no pueden heredar de más de una clase abstracta, mientras que los interfaces permiten herencia múltiple.

## Implementación de métodos de interfaces
1. **Métodos abstractos comunes**:
    - Si varias interfaces tienen métodos abstractos con la misma firma, una única implementación en la clase será válida para todos ellos.
2. **Métodos estáticos**:
    - No se heredan, ya que son exclusivos del interfaz donde están definidos. Por tanto, no generan conflictos.
3. **Métodos por defecto comunes**:
    - Si varios interfaces contienen métodos por defecto con la misma firma, se produce una **colisión**.
    - Para resolver esta colisión, **la clase debe sobrescribir el método por defecto**. En esta sobrescritura, se puede elegir explícitamente cuál implementación usar mediante `super`.

![[archivos/imagenes/Pasted image 20241218171057.png]]
## Jerarquías de interfaces
- Las **interfaces derivados** pueden heredar de varios interfaces base, permitiendo herencia múltiple.
- Un interfaz derivado:
    - Hereda todos los métodos abstractos y por defecto de los interfaces base.
    - **No hereda métodos estáticos**.
    - Puede sobrescribir los métodos por defecto de los interfaces base y, en caso de colisión, resolverla con `super`.

![[archivos/imagenes/Pasted image 20241218171527.png]]
### Relación clases e interfaces
- Una clase **no puede extender** un interfaz ni viceversa.
- Sin embargo:
    - Una clase puede **implementar varios interfaces**.
    - Esto combina **herencia de clases**, **herencia de interfaces** y **implementación de interfaces por clases** en una única jerarquía.



## Resumen
- Los interfaces permiten herencia múltiple y métodos por defecto.
- Las clases que implementan varios interfaces resuelven conflictos sobrescribiendo los métodos por defecto.
- La complejidad de las jerarquías depende de la combinación de herencia de clases, herencia de interfaces y su implementación. Sin embargo, el diseño debe priorizar la extensibilidad y la claridad.